  GNU nano 7.2                                            dev.env                                                     # ===== Environment meta =====
# ===== Environment meta =====
ENV_NAME=dev

# ===== Repo + data roots =====
REPO_ROOT=/opt/sharpe10/S10-INFRA

# Host data paths for Kafka/ZooKeeper (bind mounts)
DATA_ROOT=/opt/sharpe10/data
ZK_DATA=${DATA_ROOT}/zookeeper
KAFKA_DATA=${DATA_ROOT}/kafka

# ===== Canonical hostnames (you already mapped these in /etc/hosts) =====
SERVER1_HOST=server1    # ClickHouse bare metal
SERVER2_HOST=server2    # Prometheus/Grafana (your typical setup)
SERVER3_HOST=server3    # Kafka/ZooKeeper/Connect

# ===== ClickHouse (server1) =====
CH_HOST=${SERVER1_HOST}
CH_PORT=9000
CH_HTTP_PORT=8123
CH_USER=default
CH_PASSWORD=            # leave empty if no password
CH_DB=database1

# ===== Kafka (server3) =====
# Kafka exposes two listeners in your stack:
# - internal (Docker overlay): kafka:9092
# - external (host/other servers): server3:29092
KAFKA_BROKERS_INTERNAL=kafka:9092
KAFKA_BROKERS_EXTERNAL=${SERVER3_HOST}:29092
# Default for host-side scripts; change to INTERNAL when used inside containers
KAFKA_BROKERS=${KAFKA_BROKERS_EXTERNAL}

# ZooKeeper (adjust to INTERNAL if the caller is inside Docker)
ZK_CONNECT=${SERVER3_HOST}:2181
ZK_CONNECT_INTERNAL=zookeeper:2181

# Kafka Connect REST (Connect usually runs on server3)
CONNECT_HOST=${SERVER3_HOST}
CONNECT_PORT=8083
CONNECT_URL=http://${CONNECT_HOST}:${CONNECT_PORT}

# ===== ClickHouse Sink Connector (templated JSON) =====
CONNECTOR_NAME=clickhouse-sink
CONNECT_TASKS_MAX=4
CONNECT_TOPICS=docker_topic_1
CONNECT_TOPIC2TABLE=docker_topic_1=production_test_table_1
CONNECT_AUTO_CREATE=false
CONNECT_BATCH_SIZE=50000
CONNECT_LINGER_MS=500

# Consumer overrides used by the sink
KAFKA_FETCH_MIN_BYTES=52428800
KAFKA_FETCH_MAX_BYTES=524288000
KAFKA_FETCH_MAX_WAIT_MS=500
KAFKA_MAX_PARTITION_FETCH=52428800
KAFKA_MAX_POLL_RECORDS=100000

# ===== Monitoring (server2) =====
PROMETHEUS_HOST=${SERVER2_HOST}
PROMETHEUS_PORT=9090
GRAFANA_HOST=${SERVER2_HOST}
GRAFANA_PORT=3000
NODE_EXPORTER_PORT=9100

# ===== Common paths (adjust to your actual mounts) =====
BACKUP_ROOT=/mnt/backup
FREEZE_ROOT=/var/lib/clickhouse/shadow
LOG_DIR=/var/log/sharpe10