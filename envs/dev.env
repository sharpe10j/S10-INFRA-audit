# ===== Meta =====
ENV_NAME=dev
REPO_ROOT=/opt/sharpe10/S10-INFRA
# Default system account to own Sharpe10 artifacts unless overridden per-host.
SHARPE10_OWNER=jake_morrison:jake_morrison

# ===== Hosts =====
SERVER1_HOST=server1
SERVER2_HOST=server2
SERVER3_HOST=server3

# If you track static IPs:
SERVER1_IP=10.0.0.208
SERVER2_IP=10.0.0.225
SERVER3_IP=10.0.0.210

# ===== Swarm overlay (shared) =====
SWARM_OVERLAY_NAME=external-connect-overlay

# ===== Paths =====
DATA_ROOT=/opt/sharpe10/data
ZK_DATA=${DATA_ROOT}/zookeeper
KAFKA_DATA=${DATA_ROOT}/kafka
BACKUP_ROOT=/mnt/backup
FREEZE_ROOT=/var/lib/clickhouse/shadow
LOG_DIR=/var/log/sharpe10

# ===== ClickHouse (defaults; server1 overrides CH_HOST) =====
CH_HOST=${SERVER1_HOST}
CH_PORT=9000
CH_HTTP_PORT=8123
CH_USER=default
CH_PASSWORD=
CH_DB=database1

# ===== Kafka (defaults) =====
# internal (container-to-container via overlay)
KAFKA_BROKERS_INTERNAL=kafka:9092
ZK_CONNECT_INTERNAL=zookeeper:2181

# external (host:port for clients outside swarm)
KAFKA_BROKERS_EXTERNAL=${SERVER3_HOST}:29092
KAFKA_BROKERS=${KAFKA_BROKERS_EXTERNAL}
ZK_CONNECT=${SERVER3_HOST}:2181

# Kafka Connect (host)
CONNECT_HOST=${SERVER3_HOST}
CONNECT_PORT=8083
CONNECT_URL=http://${CONNECT_HOST}:${CONNECT_PORT}

# ===== ClickHouse Sink Connector defaults =====
CONNECTOR_NAME=clickhouse-sink
CONNECT_TASKS_MAX=4
CONNECT_TOPICS=docker_topic_1
CONNECT_TOPIC2TABLE=docker_topic_1=production_test_table_1
CONNECT_AUTO_CREATE=false
CONNECT_BATCH_SIZE=50000
CONNECT_LINGER_MS=500

# Consumer tuning used by the sink
KAFKA_FETCH_MIN_BYTES=52428800
KAFKA_FETCH_MAX_BYTES=524288000
KAFKA_FETCH_MAX_WAIT_MS=500
KAFKA_MAX_PARTITION_FETCH=52428800
KAFKA_MAX_POLL_RECORDS=100000

# ===== Monitoring =====
PROMETHEUS_PORT=9090
ALERTMANAGER_PORT=9093
GRAFANA_PORT=3000
NODE_EXPORTER_PORT=9100
KAFKA_EXPORTER_PORT=9308

PROM_ROOT=/opt/prometheus
ALERTM_ROOT=/opt/alertmanager
GRAFANA_ROOT=/opt/grafana
ALERTMANAGER_HOST=alertmanager

# Kafka Exporter target (external broker)
KAFKA_BROKER_ADDR=${SERVER3_IP}:29092
KAFKA_VERSION=3.6.0

# Alertmanager email (example placeholders)
ALERT_SMTP_HOSTPORT=smtp.gmail.com:587
ALERT_SMTP_FROM="Sharpe_10 Alerts <jmorrison@sharpe10.com>"
ALERT_SMTP_USERNAME=jmorrison@sharpe10.com
ALERT_SMTP_REQUIRE_TLS=true
ALERT_DEFAULT_RECEIVER=team-email
ALERT_EMAIL_TO=jmorrison@sharpe10.com
ALERT_GROUP_WAIT=30s
ALERT_GROUP_INTERVAL=5m
ALERT_REPEAT_INTERVAL=12h

# ===== Validation =====
VALIDATION_TOPIC=docker_topic_1
VALIDATION_BATCH_SIZE=10000
VALIDATION_COMMIT=0
VALIDATION_USE_LOCK=0
VALIDATION_SUMMARY=summary.json
VALIDATION_DETAILS=details.json
VALIDATION_BAD_ROWS=bad_rows.json
VALIDATION_CH_QUERY_LOG=ch_query_windows.json
VALIDATION_DOTENV=/etc/sharpe10/validation.env
