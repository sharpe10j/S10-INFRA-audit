<clickhouse>
  <logger>
    <level>trace</level>
    <log>/var/log/clickhouse-keeper/clickhouse-keeper.log</log>
    <errorlog>/var/log/clickhouse-keeper/clickhouse-keeper.err.log</errorlog>
    <size>1000M</size>
    <count>10</count>
  </logger>

  <listen_host>::</listen_host>
  <max_connections>4096</max_connections>

  <keeper_server>
    <tcp_port>${KEEPER_CLIENT_PORT}</tcp_port>
    <!-- Must be unique per keeper; export KEEPER_SERVER_ID=1|2 on each host -->
    <server_id>${KEEPER_SERVER_ID}</server_id>

    <log_storage_path>/var/lib/clickhouse/coordination/logs</log_storage_path>
    <snapshot_storage_path>/var/lib/clickhouse/coordination/snapshots</snapshot_storage_path>

    <coordination_settings>
      <operation_timeout_ms>10000</operation_timeout_ms>
      <min_session_timeout_ms>10000</min_session_timeout_ms>
      <session_timeout_ms>100000</session_timeout_ms>
      <raft_logs_level>information</raft_logs_level>
      <compress_logs>false</compress_logs>
    </coordination_settings>

    <hostname_checks_enabled>false</hostname_checks_enabled>

    <raft_configuration>
      <server>
        <id>1</id>
        <hostname>${SERVER1_HOST}</hostname>
        <port>${KEEPER_RAFT_PORT}</port>
      </server>
      <server>
        <id>2</id>
        <hostname>${SERVER2_HOST}</hostname>
        <port>${KEEPER_RAFT_PORT}</port>
      </server>
      <!-- Add a third server block later if you bring up Keeper on server3 -->
    </raft_configuration>
  </keeper_server>
</clickhouse>
